<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting started · PlantBiophysics.jl</title><link rel="canonical" href="https://VEZY.github.io/PlantBiophysics.jl/get_started/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">PlantBiophysics.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Getting started</a><ul class="internal"><li><a class="tocitem" href="#TL;DR"><span>TL;DR</span></a></li><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Using-a-model"><span>Using a model</span></a></li><li><a class="tocitem" href="#List-of-models"><span>List of models</span></a></li></ul></li><li><span class="tocitem">Models</span><ul><li><a class="tocitem" href="../photosynthesis/">Photosynthesis</a></li><li><a class="tocitem" href="../gs/">Stomatal conductance</a></li><li><a class="tocitem" href="../energy_balance/">Energy balance</a></li><li><a class="tocitem" href="../light/">Light interception</a></li></ul></li><li><span class="tocitem">Details</span><ul><li><a class="tocitem" href="../concepts/">Package design</a></li><li><a class="tocitem" href="../implement_a_model/">Implement a model</a></li></ul></li><li><a class="tocitem" href="../functions/">Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting started</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/VEZY/PlantBiophysics.jl/blob/master/docs/src/get_started.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-started"><a class="docs-heading-anchor" href="#Getting-started">Getting started</a><a id="Getting-started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-started" title="Permalink"></a></h1><h2 id="TL;DR"><a class="docs-heading-anchor" href="#TL;DR">TL;DR</a><a id="TL;DR-1"></a><a class="docs-heading-anchor-permalink" href="#TL;DR" title="Permalink"></a></h2><p>Simulate the leaf energy balance, photosynthesis and stomatal conductance at once using the following code:</p><pre><code class="language-julia">meteo = Atmosphere(T = 22.0, Wind = 0.8333, P = 101.325, Rh = 0.4490995)

leaf = LeafModels(energy = Monteith(),
            photosynthesis = Fvcb(),
            stomatal_conductance = Medlyn(0.03, 12.0),
            Rn = 13.747, skyFraction = 1.0, PPFD = 1500.0, d = 0.03)

energy_balance(leaf,meteo)</code></pre><pre class="documenter-example-output">MutableNamedTuple(Rn = 25.87868263833638, skyFraction = 1.0, d = 0.03, Tₗ = 18.138395178236173, Rₗₗ = 12.131682638336379, H = -191.2963902111334, λE = 217.17507284946976, Cₛ = 346.195093938579, Cᵢ = 315.3508275950588, A = 34.38670866240977, Gₛ = 1.1151044008047484, Gbₕ = 0.02043049354680836, Dₗ = 1.4620564631376178, Gbc = 0.6390998735906283, PPFD = 1500.0)</pre><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>The package is designed to ease the computations of biophysical processes in plants and other objects. It is part of the <a href="https://archimed-platform.github.io/">Archimed platform</a>, so it shares the same ontology (same concepts and terms).</p><p>This package is designed to simulate four different processes:</p><ul><li>photosynthesis</li><li>stomatal conductance</li><li>energy balance</li><li>light interception (no models at the moment, but coming soon!)</li></ul><p>These processes can be simulated using different models included in the package, or provided by the user. Each process has its associated generic function and abstract struct (see <a href="../concepts/#Concepts-and-design">Concepts and design</a>).</p><p>Then, the models are chosen by using a concrete structure that serves two purposes: holding the parameter values of the model, and dispatch to the right method when calling the generic function. They are generally named after the model they implement.</p><p>If you don&#39;t plan to implement your own model, you just have to learn about the generic functions and the different models implemented to simulate the processes. This is what we describe in this section.</p><p>If you want to implement your own models, please read the <a href="../concepts/#Concepts-and-design">Concepts and design</a> section first, and then <a href="../implement_a_model/#model_implementation_page">Model implementation</a>.</p><h2 id="Using-a-model"><a class="docs-heading-anchor" href="#Using-a-model">Using a model</a><a id="Using-a-model-1"></a><a class="docs-heading-anchor-permalink" href="#Using-a-model" title="Permalink"></a></h2><p>In this package, each process can be simulated using a function:</p><ul><li><a href="../functions/#PlantBiophysics.gs-Union{Tuple{S}, Tuple{Gs}, Tuple{A}, Tuple{E}, Tuple{I}, Tuple{LeafModels{I,E,A,Gs,S},Any}} where S where Gs&lt;:AbstractGsModel where A where E where I"><code>gs</code></a> for the stomatal conductance</li><li><a href="../functions/#PlantBiophysics.photosynthesis"><code>photosynthesis</code></a> for the photosynthesis</li><li><a href="../functions/#PlantBiophysics.energy_balance"><code>energy_balance</code></a> for the energy balance</li></ul><p>The call to the function is the same whatever the model you chose for simulating the process. This is some magic allowed by Julia! A call to a function is as follows:</p><pre><code class="language-julia">gs(component,meteo)
photosynthesis(component,meteo)
energy_balance(component,meteo)</code></pre><p>We describe the two arguments below.</p><h3 id="Component-model"><a class="docs-heading-anchor" href="#Component-model">Component model</a><a id="Component-model-1"></a><a class="docs-heading-anchor-permalink" href="#Component-model" title="Permalink"></a></h3><p>The first argument to the function is what we call a component model (<a href="../functions/#PlantBiophysics.AbstractComponentModel"><code>AbstractComponentModel</code></a>). A component model is a data structure that lists in its fields the processes simulated for a component, and the associated model and parameter values.</p><p>The model is chosen by using a particular type of model for a field of the component model. The type (in the programmatic sense) of the model helps Julia know which method it should use for simulating the process. But this is complicated technical gibberish for something quite simple. Let&#39;s use an example instead!</p><p>The most sounding example of a component model is <a href="../functions/#PlantBiophysics.LeafModels"><code>LeafModels</code></a>. It is designed to hold all processes simulated for a photosynthetic organ, or at least for a leaf.</p><p>A <a href="../functions/#PlantBiophysics.LeafModels"><code>LeafModels</code></a> has five fields:</p><pre><code class="language-julia">fieldnames(LeafModels)</code></pre><pre class="documenter-example-output">(:interception, :energy, :photosynthesis, :stomatal_conductance, :status)</pre><p>The first four are for defining models used to simulate the associated processes, and the fifth (<code>status</code>) helps keeping track of the state of simulated variables, because they can be modified by a simulation.</p><p>Let&#39;s instantiate a <a href="../functions/#PlantBiophysics.LeafModels"><code>LeafModels</code></a> with some models. If we want to simulate the photosynthesis with the model of Farquhar et al. (1980) and the stomatal conductance with the model of Medlyn et al. (2011), we would use <code>Fvcb()</code> and <code>Medlyn</code> respectively, as follows:</p><pre><code class="language-julia">LeafModels(photosynthesis = Fvcb(), stomatal_conductance = Medlyn(0.03, 12.0))</code></pre><pre class="documenter-example-output">LeafModels{Missing,Missing,Fvcb{Float64},Medlyn{Float64},MutableNamedTuples.MutableNamedTuple{(:PPFD, :Tₗ, :Cₛ, :A, :Gₛ, :Cᵢ, :Dₗ),NTuple{7,Base.RefValue{Float64}}}}(missing, missing, Fvcb{Float64}(25.0, 200.0, 250.0, 0.6, 46390.0, 210.0, 29680.0, 200000.0, 631.88, 58550.0, 200000.0, 629.26, 0.425, 0.9), Medlyn{Float64}(0.03, 12.0), MutableNamedTuple(PPFD = -999.99, Tₗ = -999.99, Cₛ = -999.99, A = -999.99, Gₛ = -999.99, Cᵢ = -999.99, Dₗ = -999.99))</pre><p>We can instantiate a <a href="../functions/#PlantBiophysics.LeafModels"><code>LeafModels</code></a> without choosing a model for all processes. In our example above we don&#39;t provide any model for the <code>interception</code> and <code>energy</code> processes, so they will have the default value <code>missing</code> in our leaf, meaning they cannot be simulated.</p><p>Some models require some variables as input values. For example if we want to simulate the leaf photosynthesis using the <code>Fvcb</code> model, we need the leaf temperature, the PPFD (Photosynthetic Photon Flux Density) and the CO₂ concentration at the leaf surface. The values for these variables are given as follows:</p><pre><code class="language-julia">LeafModels(photosynthesis = Fvcb(),
    stomatal_conductance = Medlyn(0.03, 12.0),
    Tₗ = 25.0, PPFD = 1000.0, Cₛ = 400.0, Dₗ = 0.82)</code></pre><pre class="documenter-example-output">LeafModels{Missing,Missing,Fvcb{Float64},Medlyn{Float64},MutableNamedTuples.MutableNamedTuple{(:PPFD, :Tₗ, :Cₛ, :A, :Gₛ, :Cᵢ, :Dₗ),NTuple{7,Base.RefValue{Float64}}}}(missing, missing, Fvcb{Float64}(25.0, 200.0, 250.0, 0.6, 46390.0, 210.0, 29680.0, 200000.0, 631.88, 58550.0, 200000.0, 629.26, 0.425, 0.9), Medlyn{Float64}(0.03, 12.0), MutableNamedTuple(PPFD = 1000.0, Tₗ = 25.0, Cₛ = 400.0, A = -999.99, Gₛ = -999.99, Cᵢ = -999.99, Dₗ = 0.82))</pre><p>They are given as keyword arguments (<code>Tₗ = 25.0</code>, <code>PPFD = 1000.0</code>, <code>Cₛ = 400.0</code>, <code>Dₗ = 0.82</code>). This is a convenience to set up initialization values for some variables required by models. We already know that <code>PPFD</code>, <code>Cₛ</code> and <code>Tₗ</code> are needed for the <code>Fvcb</code> model. And <code>Dₗ</code> is needed for the <code>Medlyn</code> model ( and <code>Cₛ</code> too).</p><p>To know which variables you need to initialize for a simulation, use the <a href="../functions/#PlantBiophysics.to_initialise-Union{Tuple{T}, Tuple{T,Vararg{Any,N} where N}} where T&lt;:Union{Missing, AbstractModel}"><code>to_initialise</code></a> function on one or several model instances, or directly on a component model (<em>e.g.</em> <a href="../functions/#PlantBiophysics.LeafModels"><code>LeafModels</code></a>). For example in our case we use the <code>Fvcb</code> and <code>Medlyn</code> models, so we would do:</p><pre><code class="language-julia">to_initialise(Fvcb(),Medlyn(0.03, 12.0))</code></pre><pre class="documenter-example-output">4-element Array{Symbol,1}:
 :PPFD
 :Tₗ
 :Cₛ
 :Dₗ</pre><p>Or directly on a component model after instantiation:</p><pre><code class="language-julia">leaf = LeafModels(photosynthesis = Fvcb(), stomatal_conductance = Medlyn(0.03, 12.0))
to_initialise(leaf)</code></pre><pre class="documenter-example-output">4-element Array{Symbol,1}:
 :PPFD
 :Tₗ
 :Cₛ
 :Dₗ</pre><p>You can also use <a href="../functions/#PlantBiophysics.is_initialised-Tuple{T} where T&lt;:AbstractComponentModel"><code>is_initialised</code></a> to know if a component is sufficiently initialized:</p><pre><code class="language-julia">is_initialised(leaf)</code></pre><pre class="documenter-example-output">false</pre><p>And then you can initialize the component model status using <a href="../functions/#PlantBiophysics.init_status!-Tuple{Dict{String,AbstractComponentModel}}"><code>init_status!</code></a>:</p><pre><code class="language-julia">init_status!(leaf, Tₗ = 25.0, PPFD = 1000.0, Cₛ = 400.0, Dₗ = 1.2)</code></pre><p>And check again if it worked:</p><pre><code class="language-julia">is_initialised(leaf)</code></pre><pre class="documenter-example-output">true</pre><p>Yes, it did!</p><p>Both <a href="../functions/#PlantBiophysics.to_initialise-Union{Tuple{T}, Tuple{T,Vararg{Any,N} where N}} where T&lt;:Union{Missing, AbstractModel}"><code>to_initialise</code></a> and <a href="../functions/#PlantBiophysics.is_initialised-Tuple{T} where T&lt;:AbstractComponentModel"><code>is_initialised</code></a> search for common input variables among all models used. Then, they compare with the outputs of the models, and if one variable is needed as input but provided as output of another model, the variable is not considered for initialization because it is thought that the user will simulate these variables.</p><h3 id="Climate-forcing"><a class="docs-heading-anchor" href="#Climate-forcing">Climate forcing</a><a id="Climate-forcing-1"></a><a class="docs-heading-anchor-permalink" href="#Climate-forcing" title="Permalink"></a></h3><p>To make a simulation, we most often need the climatic/meteorological conditions measured close to the object or component. They are given as the second argument of the process functions shown before.</p><p>The package provide its own data structure to declare those conditions, and to pre-compute other required variables. This data structure is a type called <a href="../functions/#PlantBiophysics.Atmosphere"><code>Atmosphere</code></a>.</p><p>The mandatory variables to provide are: <code>T</code> (air temperature in °C), <code>Rh</code> (relative humidity, 0-1), <code>Wind</code> (the wind speed in m s-1) and <code>P</code> (the air pressure in kPa).</p><p>We can declare such conditions using <a href="../functions/#PlantBiophysics.Atmosphere"><code>Atmosphere</code></a> such as:</p><pre><code class="language-julia">meteo = Atmosphere(T = 20.0, Wind = 1.0, P = 101.3, Rh = 0.65)</code></pre><pre class="documenter-example-output">Atmosphere{Float64}(20.0, 1.0, 101.3, 0.65, 400.0, 1.5255470730405223, 2.3469954969854188, 0.8214484239448965, 1.2037851579511918, 2.4537e6, 0.06723680111943287, 0.5848056484857892, 0.14573378083416522)</pre><p>The <a href="../functions/#PlantBiophysics.Atmosphere"><code>Atmosphere</code></a> also computes other variables based on the provided conditions, such as the vapor pressure deficit (VPD) or the air density (ρ). You can also provide those variables as inputs if necessary. For example if you need another way of computing the VPD, you can provide it as follows:</p><pre><code class="language-julia">Atmosphere(T = 20.0, Wind = 1.0, P = 101.3, Rh = 0.65, VPD = 0.82)</code></pre><pre class="documenter-example-output">Atmosphere{Float64}(20.0, 1.0, 101.3, 0.65, 400.0, 1.5255470730405223, 2.3469954969854188, 0.82, 1.2037851579511918, 2.4537e6, 0.06723680111943287, 0.5848056484857892, 0.14573378083416522)</pre><p>To access the values of the variables in <code>meteo</code>, use the dot syntax. For example if we need the vapor pressure at saturation, we would do as follows:</p><pre><code class="language-julia">meteo.eₛ</code></pre><pre class="documenter-example-output">2.3469954969854188</pre><p>See the documentation of the function if you need more information about the variables.</p><h2 id="List-of-models"><a class="docs-heading-anchor" href="#List-of-models">List of models</a><a id="List-of-models-1"></a><a class="docs-heading-anchor-permalink" href="#List-of-models" title="Permalink"></a></h2><p>As presented above, each process is simulated using a particular model. A model can work either independently or in conjunction with other models. For example a stomatal conductance model is often associated with a photosynthesis model. <em>i.e.</em>, it is called from the photosynthesis model.</p><p>Several models are provided in this package, and the user can also add new models by following the instructions in the corresponding section.</p><p>The models included in the package are listed below.</p><h3 id="Stomatal-conductance"><a class="docs-heading-anchor" href="#Stomatal-conductance">Stomatal conductance</a><a id="Stomatal-conductance-1"></a><a class="docs-heading-anchor-permalink" href="#Stomatal-conductance" title="Permalink"></a></h3><p>The stomatal conductance (<code>Gₛ</code>) can be simulated using the <a href="../functions/#PlantBiophysics.gs-Union{Tuple{S}, Tuple{Gs}, Tuple{A}, Tuple{E}, Tuple{I}, Tuple{LeafModels{I,E,A,Gs,S},Any}} where S where Gs&lt;:AbstractGsModel where A where E where I"><code>gs</code></a> function. Several models are available to simulate it:</p><ul><li><a href="../functions/#PlantBiophysics.Medlyn"><code>Medlyn</code></a>: an implementation of the Medlyn et al. (2011) model</li><li><a href="../functions/#PlantBiophysics.ConstantGs"><code>ConstantGs</code></a>: a model to force a constant value for <code>Gₛ</code></li></ul><h3 id="Photosynthesis"><a class="docs-heading-anchor" href="#Photosynthesis">Photosynthesis</a><a id="Photosynthesis-1"></a><a class="docs-heading-anchor-permalink" href="#Photosynthesis" title="Permalink"></a></h3><p>The photosynthesis can be simulated using the <a href="../functions/#PlantBiophysics.photosynthesis"><code>photosynthesis</code></a> function. Several models are available to simulate it:</p><ul><li><a href="../functions/#PlantBiophysics.Fvcb"><code>Fvcb</code></a>: an implementation of the Farquhar–von Caemmerer–Berry (FvCB) model for C3 photosynthesis (Farquhar et al., 1980; von Caemmerer and Farquhar, 1981) using the analytical resolution</li><li><a href="../functions/#PlantBiophysics.FvcbIter"><code>FvcbIter</code></a>: the same model but implemented using an iterative computation over Cᵢ</li><li><a href="../functions/#PlantBiophysics.ConstantA"><code>ConstantA</code></a>: a model to set the photosynthesis to a constant value (mainly for testing)</li></ul><p>You can choose which model you use by passing a component with an assimilation model set to one of the <code>structs</code> above. We will show some examples in the end of this paragraph.</p><p>For example, you can simulate a constant assimilation of a leaf using the following code:</p><pre><code class="language-julia">meteo = Atmosphere(T = 20.0, Wind = 1.0, P = 101.3, Rh = 0.65)

leaf = LeafModels(photosynthesis = ConstantA(25.0),
                stomatal_conductance = ConstantGs(0.03,0.1),
                Cₛ = 380.0)

photosynthesis(leaf,meteo)</code></pre><pre class="documenter-example-output">MutableNamedTuple(Cₛ = 380.0, A = 25.0, Gₛ = 0.1, Cᵢ = 130.0)</pre><h3 id="Energy-balance"><a class="docs-heading-anchor" href="#Energy-balance">Energy balance</a><a id="Energy-balance-1"></a><a class="docs-heading-anchor-permalink" href="#Energy-balance" title="Permalink"></a></h3><p>The simulation of the energy balance of a component is the most integrative process of the package because it is (potentially) coupled with the conductance and assimilation models if any.</p><p>To simulate the energy balance of a component, we use the <a href="../functions/#PlantBiophysics.energy_balance"><code>energy_balance</code></a> function. Only one model is implemented yet, the one presented in Monteith and Unsworth (2013). The structure is called <a href="../functions/#PlantBiophysics.Monteith"><code>Monteith</code></a>, and is only used for photosynthetic organs. Further implementations will come in the future.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../photosynthesis/">Photosynthesis »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 4 March 2021 09:40">Thursday 4 March 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
